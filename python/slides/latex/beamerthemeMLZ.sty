% LaTeX BEAMER theme MLZ for Heinz Maier-Leibnitz Zentrum Garching
% by Joachim Wuttke

% Requirements:
\RequirePackage{tikz}
\RequirePackage{xifthen}

% Colors:
\definecolor{mlzblue}{RGB}{32,54,106}
\definecolor{mlzorange}{RGB}{247,133,33}
\definecolor{mlztextgray}{gray}{0.5}
\setbeamercolor*{item}{fg=mlzorange}

\newcommand\colunderline[2]{\colorlet{temp}{.}\color{#1}\underline{\color{temp}#2}\color{temp}}

\newboolean{internaltalk}
\setboolean{internaltalk}{false}

\def\ifhaveheader#1#2{\ifthenelse{\thepage>1\AND\boolean{internaltalk}}{#1}{#2}}

\newcommand<>\footinfo{\alt#1{\@dblarg\beamer@@footinfo}{\beamer@gobbleoptional}}
\long\def\beamer@@footinfo[#1]#2{%
%  \beamer@ifempty{#2}{}{%
    \gdef\insertfootinfo{#2}%
}%

\newcommand\whiteframe{\begin{frame}[plain]\end{frame}\global\advance\c@framenumber by-1\relax}

\footinfo{}

\mode
<presentation>

\defbeamertemplate*{footline}{}
{
  \leavevmode%
  \begin{tikzpicture}
    \ifnum\thepage>1\relax%
      \useasboundingbox (0,0) rectangle(\the\paperwidth,.6);
      \draw[color=mlzblue,thick,rounded corners=8pt]
        (0,.6) -- (12.45,.6) -- (12.45,0);
      \node[color=mlztextgray,text width=22cm] at (12,.3)
        {\insertshortpart\ifx\insertfootinfo\@empty\else\insertfootinfo\fi};
      \node[color=mlztextgray,align=right] at (12,.3)
        {\insertframenumber};
    \else
      \useasboundingbox (0,0) rectangle(\the\paperwidth,1.2);
      \draw[color=mlzblue,thick,rounded corners=8pt]
        (0,1.2) -- (12.45,1.2) -- (12.45,0);
    \node[text width=12cm] at (7,1.)
      {\tiny MLZ is a cooperation between};
    \node[align=right] at (1.8,.4)
      {\includegraphics[height=16pt]{logo-FZJ.pdf}};
    \node[align=right] at (4.2,.4)
      {\includegraphics[height=17pt]{logo-HZG.eps}};
    \node[align=right] at (6.5,.4)
      {\includegraphics[height=16pt]{logo-TUM.png}};
    \fi
  \end{tikzpicture}
  \footinfo{}
}

% Title page
\defbeamertemplate*{title page}{}[1][]
{
   \vfill\vfill
      {\Huge\inserttitle}\par%
    \vfill
      {\scriptsize\insertauthor}%
     \vskip0.2cm%
      {\scriptsize\insertdate}%
  \vfill\vfill
}

\defbeamertemplate*{frametitle}{MLZ}[1][left]
{
  \ifhaveheader{
    \vskip-.7em
  }{
    \vskip.3em
  }
  \color{black}
  \colunderline{mlzorange}{\insertframetitle}
  \ifthenelse{\equal\insertframesubtitle{}}{\\[.6em]}{\\[-.2em]
  {\scriptsize\color{mlzblue}\insertframesubtitle}\par\vskip.1em}
}

% Items
\setbeamertemplate{items}[square]
\setbeamertemplate{sections/subsections in toc}[square]

\setbeamertemplate{navigation symbols}{} % needed to switch them off
\setbeamertemplate{blocks}[rounded][shadow=true]  

\mode
<all>
